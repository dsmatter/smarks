(function(){define("ajax",[],function(){var e,t,n;return t="#BB6D6D",n="#cae3ca",e=function(e,t,n){return e.animate({backgroundColor:t},100,function(){return e.css("background",""),typeof n=="function"?n():void 0})},function(n,r,i,s){var o;return typeof i=="function"&&(s=i,i={}),o=i.error,i.error=function(r){if(n!=null)return n.hideLoading(),e(n,t,function(){return typeof o=="function"?o(r):void 0})},i.success=function(e){return n!=null&&n.hideLoading(),s(e)},n!=null&&n.showLoading(),$.ajax(r,i)}})}).call(this),function(){define("selection",[],function(){return{setup:function(e){var t,n;return n=function(){return $(e).addClass("selected")},t=function(){return $(e).removeClass("selected")},$(e).hover(n,t)}}})}.call(this),function(){define("token",["ajax","selection"],function(e,t){return flight.component(function(){return this.remove=function(){var t=this;return e(this.$node,"/tokens/"+this.attr.id,{type:"DELETE"},function(){return t.$node.fadeOut().remove(),t.teardown()})},this.after("initialize",function(){var e=this;return this.attr.id=this.$node.attr("id").replace("token-",""),this.$node.find(".delete").click(function(){return e.remove()}),t.setup(this.$node.find(".delete"))})})})}.call(this),function(){require.config({baseUrl:"/js/rjs"}),require(["ajax","token","selection"],function(e,t,n){return $(".status").hide(),t.attachTo($("#tokens .token")),$("#addtoken").click(function(){return e($(this),"/tokens/new",function(e){return $("#tokens").append(e),t.attachTo($("#tokens .token").last())})}),n.setup($("#addtoken"))})}.call(this),define("../user",function(){});